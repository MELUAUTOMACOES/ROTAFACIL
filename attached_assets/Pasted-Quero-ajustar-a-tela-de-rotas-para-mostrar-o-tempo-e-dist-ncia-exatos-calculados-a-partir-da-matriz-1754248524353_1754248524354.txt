Quero ajustar a tela de rotas para mostrar o tempo e distância exatos, calculados a partir da matriz OSRM e da ordem otimizada pelo TSP.
Objetivo:

Mostrar o tempo e distância total da rota (em cima e embaixo, como já está).

Mostrar, em cada card da sequência da rota, a distância e o tempo estimado daquele trecho (do ponto anterior até o atual).

Especificações:
Tempo/Distância Total:

Calcule a soma de todos os tempos e distâncias dos trechos entre os pontos na ordem otimizada do TSP.

Exiba:

Tempo total (exemplo: 1h 12min)

Distância total (exemplo: 18.7 km)

Tempo/Distância por Trecho:

Para cada parada na sequência otimizada, mostre:

A distância do último ponto até aquele ponto (exemplo: 2.7 km)

O tempo estimado do último ponto até aquele ponto (exemplo: 6 min)

No primeiro ponto, exiba distância/tempo em branco ou "—", já que é o início.

Usar matriz do OSRM:

A matriz de duração (matrixDurations) vem do OSRM (campo durations).

A matriz de distância (matrixDistances) pode ser ativada pedindo ?annotations=duration,distance no endpoint OSRM.

Ordem otimizada (tspOrder) vem do endpoint /api/rota/tsp.

Exemplo de implementação (ajuste conforme seu código):
javascript
Copiar
Editar
// Suponha:
const tspOrder = [0, 2, 3, 1, 4]; // Ordem otimizada (índices dos pontos)
const matrixDurations = ... // matriz [i][j] de segundos (OSRM)
const matrixDistances = ... // matriz [i][j] de metros (OSRM)

// Calcule para cada trecho:
let totalTime = 0;
let totalDistance = 0;
const routeSteps = [];

for (let i = 1; i < tspOrder.length; i++) {
  const from = tspOrder[i - 1];
  const to = tspOrder[i];
  const timeSec = matrixDurations[from][to];
  const distM = matrixDistances[from][to];
  totalTime += timeSec;
  totalDistance += distM;
  routeSteps.push({
    from, to,
    distance: (distM / 1000).toFixed(1) + " km",
    duration: Math.round(timeSec / 60) + " min"
  });
}

// Tempo e distância total:
const tempoTotalFormatado = `${Math.floor(totalTime / 3600)}h ${Math.round((totalTime % 3600) / 60)}min`;
const distanciaTotalFormatada = (totalDistance / 1000).toFixed(1) + " km";

// Exemplo de uso no componente (React ou similar):
// - No topo e rodapé: tempoTotalFormatado, distanciaTotalFormatada
// - Em cada card de parada: pegue routeSteps[i-1].distance / .duration (para o trecho anterior)

Exemplo visual do resultado esperado (pseudocódigo):
lua
Copiar
Editar
Rota Otimizada
Distância total: 18.7 km
Mapa da rota ...

Sequência da Rota:
1. João Silva
   (início)
2. Maria Rocha
   2.7 km - 6 min
3. Pedro Oliveira
   1.5 km - 15 min
...
Tempo total estimado: 1h 12min
Resumo do que deve ser implementado:
Usar a matriz OSRM para calcular a soma de tempos/distâncias dos trechos conforme a ordem otimizada.

Exibir total nos lugares certos.

Exibir o tempo/distância de cada trecho individualmente em cada card da parada.

Me mostre um exemplo real de como ficaria o cálculo e o uso no componente, usando os dados e as variáveis reais do meu projeto!

Dê exemplos de código antes/depois para as funções de renderização dos cards e cálculo dos totais!

